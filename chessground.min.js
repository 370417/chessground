!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Chessground=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(var o=0;o<t.length;++o){var i=t[o].data;void 0!==i&&r(i,t[o].children,t[o].sel)}}function o(e,t,n){var o,s,l,u={};if(void 0!==n?(u=t,a.array(n)?o=n:a.primitive(n)?s=n:n&&n.sel&&(o=[n])):void 0!==t&&(a.array(t)?o=t:a.primitive(t)?s=t:t&&t.sel?o=[t]:u=t),a.array(o))for(l=0;l<o.length;++l)a.primitive(o[l])&&(o[l]=i.vnode(void 0,void 0,void 0,o[l]));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||r(u,o,e),i.vnode(e,u,o,s,void 0)}var i=e("./vnode"),a=e("./is");n.h=o,Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},{"./is":3,"./vnode":9}],2:[function(e,t,n){"use strict";function r(e){return document.createElement(e)}function o(e,t){return document.createElementNS(e,t)}function i(e){return document.createTextNode(e)}function a(e){return document.createComment(e)}function s(e,t,n){e.insertBefore(t,n)}function l(e,t){e.removeChild(t)}function u(e,t){e.appendChild(t)}function c(e){return e.parentNode}function d(e){return e.nextSibling}function f(e){return e.tagName}function p(e,t){e.textContent=t}function v(e){return e.textContent}function m(e){return 1===e.nodeType}function h(e){return 3===e.nodeType}function b(e){return 8===e.nodeType}n.htmlDomApi={createElement:r,createElementNS:o,createTextNode:i,createComment:a,insertBefore:s,removeChild:l,appendChild:u,parentNode:c,nextSibling:d,tagName:f,setTextContent:p,getTextContent:v,isElement:m,isText:h,isComment:b},Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.htmlDomApi},{}],3:[function(e,t,n){"use strict";function r(e){return"string"==typeof e||"number"==typeof e}n.array=Array.isArray,n.primitive=r},{}],4:[function(e,t,n){"use strict";function r(e,t){var n,r,i,s,l=t.elm,u=e.data.attrs,c=t.data.attrs;if((u||c)&&u!==c){u=u||{},c=c||{};for(n in c)r=c[n],i=u[n],i!==r&&(!r&&a[n]?l.removeAttribute(n):(s=n.split(":"),s.length>1&&o.hasOwnProperty(s[0])?l.setAttributeNS(o[s[0]],n,r):l.setAttribute(n,r)));for(n in u)n in c||l.removeAttribute(n)}}for(var o={xlink:"http://www.w3.org/1999/xlink"},i=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],a=Object.create(null),s=0,l=i.length;s<l;s++)a[i[s]]=!0;n.attributesModule={create:r,update:r},Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.attributesModule},{}],5:[function(e,t,n){"use strict";function r(e,t){var n,r,o=t.elm,i=e.data.class,a=t.data.class;if((i||a)&&i!==a){i=i||{},a=a||{};for(r in i)a[r]||o.classList.remove(r);for(r in a)n=a[r],n!==i[r]&&o.classList[n?"add":"remove"](r)}}n.classModule={create:r,update:r},Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.classModule},{}],6:[function(e,t,n){"use strict";function r(e,t,n){l(function(){e[t]=n})}function o(e,t){var n,o,i=t.elm,a=e.data.style,s=t.data.style;if((a||s)&&a!==s){a=a||{},s=s||{};var l="delayed"in a;for(o in a)s[o]||("-"===o[0]&&"-"===o[1]?i.style.removeProperty(o):i.style[o]="");for(o in s)if(n=s[o],"delayed"===o)for(o in s.delayed)n=s.delayed[o],l&&n===a.delayed[o]||r(i.style,o,n);else"remove"!==o&&n!==a[o]&&("-"===o[0]&&"-"===o[1]?i.style.setProperty(o,n):i.style[o]=n)}}function i(e){var t,n,r=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(n in t)r.style[n]=t[n]}function a(e,t){var n=e.data.style;if(!n||!n.remove)return void t();var r,o,i=e.elm,a=0,s=n.remove,l=0,u=[];for(r in s)u.push(r),i.style[r]=s[r];o=getComputedStyle(i);for(var c=o["transition-property"].split(", ");a<c.length;++a)u.indexOf(c[a])!==-1&&l++;i.addEventListener("transitionend",function(e){e.target===i&&--l,0===l&&t()})}var s="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,l=function(e){s(function(){s(e)})};n.styleModule={create:o,update:o,destroy:i,remove:a},Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.styleModule},{}],7:[function(e,t,n){"use strict";function r(e){return void 0===e}function o(e){return void 0!==e}function i(e,t){return e.key===t.key&&e.sel===t.sel}function a(e){return void 0!==e.sel}function s(e,t,n){var r,o,i,a={};for(r=t;r<=n;++r)i=e[r],null!=i&&(o=i.key,void 0!==o&&(a[o]=r));return a}function l(e,t){function n(e){var t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return u.default(x.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}function l(e,t){return function(){if(0===--t){var n=x.parentNode(e);x.removeChild(n,e)}}}function v(e,t){var n,i=e.data;void 0!==i&&o(n=i.hook)&&o(n=n.init)&&(n(e),i=e.data);var a=e.children,s=e.sel;if("!"===s)r(e.text)&&(e.text=""),e.elm=x.createComment(e.text);else if(void 0!==s){var l=s.indexOf("#"),u=s.indexOf(".",l),d=l>0?l:s.length,p=u>0?u:s.length,m=l!==-1||u!==-1?s.slice(0,Math.min(d,p)):s,h=e.elm=o(i)&&o(n=i.ns)?x.createElementNS(n,m):x.createElement(m);if(d<p&&(h.id=s.slice(d+1,p)),u>0&&(h.className=s.slice(p+1).replace(/\./g," ")),c.array(a))for(n=0;n<a.length;++n){var b=a[n];null!=b&&x.appendChild(h,v(b,t))}else c.primitive(e.text)&&x.appendChild(h,x.createTextNode(e.text));for(n=0;n<P.create.length;++n)P.create[n](f,e);n=e.data.hook,o(n)&&(n.create&&n.create(f,e),n.insert&&t.push(e))}else e.elm=x.createTextNode(e.text);return e.elm}function m(e,t,n,r,o,i){for(;r<=o;++r){var a=n[r];null!=a&&x.insertBefore(e,v(a,i),t)}}function h(e){var t,n,r=e.data;if(void 0!==r){for(o(t=r.hook)&&o(t=t.destroy)&&t(e),t=0;t<P.destroy.length;++t)P.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)t=e.children[n],null!=t&&"string"!=typeof t&&h(t)}}function b(e,t,n,r){for(;n<=r;++n){var i=void 0,a=void 0,s=void 0,u=t[n];if(null!=u)if(o(u.sel)){for(h(u),a=P.remove.length+1,s=l(u.elm,a),i=0;i<P.remove.length;++i)P.remove[i](u,s);o(i=u.data)&&o(i=i.hook)&&o(i=i.remove)?i(u,s):s()}else x.removeChild(e,u.elm)}}function y(e,t,n,o){for(var a,l,u,c,d=0,f=0,p=t.length-1,h=t[0],y=t[p],k=n.length-1,w=n[0],P=n[k];d<=p&&f<=k;)null==h?h=t[++d]:null==y?y=t[--p]:null==w?w=n[++f]:null==P?P=n[--k]:i(h,w)?(g(h,w,o),h=t[++d],w=n[++f]):i(y,P)?(g(y,P,o),y=t[--p],P=n[--k]):i(h,P)?(g(h,P,o),x.insertBefore(e,h.elm,x.nextSibling(y.elm)),h=t[++d],P=n[--k]):i(y,w)?(g(y,w,o),x.insertBefore(e,y.elm,h.elm),y=t[--p],w=n[++f]):(void 0===a&&(a=s(t,d,p)),l=a[w.key],r(l)?(x.insertBefore(e,v(w,o),h.elm),w=n[++f]):(u=t[l],u.sel!==w.sel?x.insertBefore(e,v(w,o),h.elm):(g(u,w,o),t[l]=void 0,x.insertBefore(e,u.elm,h.elm)),w=n[++f]));d>p?(c=null==n[k+1]?null:n[k+1].elm,m(e,c,n,f,k,o)):f>k&&b(e,t,d,p)}function g(e,t,n){var i,a;o(i=t.data)&&o(a=i.hook)&&o(i=a.prepatch)&&i(e,t);var s=t.elm=e.elm,l=e.children,u=t.children;if(e!==t){if(void 0!==t.data){for(i=0;i<P.update.length;++i)P.update[i](e,t);i=t.data.hook,o(i)&&o(i=i.update)&&i(e,t)}r(t.text)?o(l)&&o(u)?l!==u&&y(s,l,u,n):o(u)?(o(e.text)&&x.setTextContent(s,""),m(s,null,u,0,u.length-1,n)):o(l)?b(s,l,0,l.length-1):o(e.text)&&x.setTextContent(s,""):e.text!==t.text&&x.setTextContent(s,t.text),o(a)&&o(i=a.postpatch)&&i(e,t)}}var k,w,P={},x=void 0!==t?t:d.default;for(k=0;k<p.length;++k)for(P[p[k]]=[],w=0;w<e.length;++w){var C=e[w][p[k]];void 0!==C&&P[p[k]].push(C)}return function(e,t){var r,o,s,l=[];for(r=0;r<P.pre.length;++r)P.pre[r]();for(a(e)||(e=n(e)),i(e,t)?g(e,t,l):(o=e.elm,s=x.parentNode(o),v(t,l),null!==s&&(x.insertBefore(s,t.elm,x.nextSibling(o)),b(s,[e],0,0))),r=0;r<l.length;++r)l[r].data.hook.insert(l[r]);for(r=0;r<P.post.length;++r)P.post[r]();return t}}var u=e("./vnode"),c=e("./is"),d=e("./htmldomapi"),f=u.default("",{},[],void 0,void 0),p=["create","update","remove","destroy","pre","post"],v=e("./h");n.h=v.h;var m=e("./thunk");n.thunk=m.thunk,n.init=l},{"./h":1,"./htmldomapi":2,"./is":3,"./thunk":8,"./vnode":9}],8:[function(e,t,n){"use strict";function r(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function o(e){var t=e.data,n=t.fn.apply(void 0,t.args);r(n,e)}function i(e,t){var n,o=e.data,i=t.data,a=o.args,s=i.args;for(o.fn===i.fn&&a.length===s.length||r(i.fn.apply(void 0,s),t),n=0;n<s.length;++n)if(a[n]!==s[n])return void r(i.fn.apply(void 0,s),t);r(e,t)}var a=e("./h");n.thunk=function(e,t,n,r){return void 0===r&&(r=n,n=t,t=void 0),a.h(e,{key:t,hook:{init:o,prepatch:i},fn:n,args:r})},Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.thunk},{"./h":1}],9:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i=void 0===t?void 0:t.key;return{sel:e,data:t,children:n,text:r,elm:o,key:i}}n.vnode=r,Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],10:[function(e,t,n){"use strict";function r(e,t){return function(n,r,o){if(r.animation.enabled&&!o)return c(n,r,e,t.bounds);var i=n(r);return e(),i}}function o(e,t,n){var r=n?p.invertKey(e):e;return{key:r,pos:p.key2pos(r),piece:t}}function i(e,t){return e.role===t.role&&e.color===t.color}function a(e,t){return t.sort(function(t,n){return p.distance(e.pos,t.pos)-p.distance(e.pos,n.pos)})[0]}function s(e,t,n){var r=n.width/8,s=n.height/8,l={},u=[],c=[],d=[],f=[],v=e.orientation!==t.orientation,m={},h="white"===t.orientation,b=t.movable.dropped;for(var y in e.pieces)m[y]=o(y,e.pieces[y],v);var g,k,w,P,x,C,M;for(w=0;w<p.allKeys.length;w++)P=p.allKeys[w],b&&P===b[1]||(g=t.pieces[P],k=m[P],g?k?i(g,k.piece)||(d.push(k),f.push(o(P,g,!1))):f.push(o(P,g,!1)):k&&d.push(k));return f.forEach(function(e){k=a(e,d.filter(function(t){return i(e.piece,t.piece)})),k&&(x=h?k.pos:e.pos,C=h?e.pos:k.pos,M=[(x[0]-C[0])*r,(C[1]-x[1])*s],l[e.key]=[M,M],u.push(k.key))}),d.forEach(function(e){b&&e.key===b[0]||p.containsX(u,e.key)||t.items&&t.items(e.pos,e.key)||c.push({pos:e.pos,piece:e.piece,opacity:1})}),{anims:l,fadings:c}}function l(e,t){return Math.round(e*t)/t}function u(e,t){if(e.animation.current&&e.animation.current.start){var n=1-((new Date).getTime()-e.animation.current.start)/e.animation.current.duration;if(n<=0)e.animation.current=void 0,t();else{var r=f(n);for(var o in e.animation.current.plan.anims){var i=e.animation.current.plan.anims[o];i[1]=[l(i[0][0]*r,10),l(i[0][1]*r,10)]}for(var a in e.animation.current.plan.fadings)e.animation.current.plan.fadings[a].opacity=l(r,100);t(),p.raf(function(){return u(e,t)})}}}function c(e,t,n,r){var o={orientation:t.orientation,pieces:{}};for(var i in t.pieces)o.pieces[i]={role:t.pieces[i].role,color:t.pieces[i].color};var a=e(t);if(t.animation.enabled){var l=s(o,t,r);if(d(l.anims)&&d(l.fadings))n();else{var c=t.animation.current&&t.animation.current.start;t.animation.current={start:(new Date).getTime(),duration:t.animation.duration,plan:l},c||u(t,n)}}else n();return a}function d(e){for(var t in e)return!1;return!0}function f(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}var p=e("./util");Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./util":19}],11:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&setTimeout(function(){return e.apply(void 0,t)},1)}function o(e){e.orientation=B.opposite(e.orientation)}function i(e){e.lastMove=void 0,g(e),u(e),d(e)}function a(e,t){for(var n in t)t[n]?e.pieces[n]=t[n]:delete e.pieces[n];e.movable.dropped=void 0}function s(e,t){var n=t||e.turnColor;for(var r in e.pieces)"king"===e.pieces[r].role&&e.pieces[r].color===n&&(e.check=r)}function l(e,t,n,o){d(e),e.premovable.current=[t,n],r(e.premovable.events.set,t,n,o)}function u(e){e.premovable.current&&(e.premovable.current=void 0,r(e.premovable.events.unset))}function c(e,t,n){u(e),e.predroppable.current={role:t,key:n},r(e.predroppable.events.set,t,n)}function d(e){var t=e.predroppable;t.current&&(t.current=void 0,r(t.events.unset))}function f(e,t,n){if(e.autoCastle){var r=e.pieces[n];if("king"===r.role){var o=B.key2pos(t);if(5===o[0]&&(1===o[1]||8===o[1])){var i,a,s,l=B.key2pos(n);if(7===l[0]||8===l[0])i=B.pos2key([8,o[1]]),a=B.pos2key([6,o[1]]),s=B.pos2key([7,o[1]]);else{if(3!==l[0]&&1!==l[0])return;i=B.pos2key([1,o[1]]),a=B.pos2key([4,o[1]]),s=B.pos2key([3,o[1]])}delete e.pieces[t],delete e.pieces[n],delete e.pieces[i],e.pieces[s]={role:"king",color:r.color},e.pieces[a]={role:"rook",color:r.color}}}}}function p(e,t,n){if(t===n||!e.pieces[t])return!1;var o=e.pieces[n]&&e.pieces[n].color!==e.pieces[t].color?e.pieces[n]:void 0;return r(e.events.move,t,n,o),e.pieces[n]=e.pieces[t],delete e.pieces[t],e.lastMove=[t,n],e.check=void 0,f(e,t,n),r(e.events.change),e.movable.dropped=void 0,!0}function v(e,t,n,o){if(e.pieces[n]){if(!o)return!1;delete e.pieces[n]}return r(e.events.dropNewPiece,t,n),e.pieces[n]=t,e.lastMove=[n,n],e.check=void 0,r(e.events.change),e.movable.dropped=void 0,e.movable.dests=void 0,e.turnColor=B.opposite(e.turnColor),!0}function m(e,t,n){var r=p(e,t,n);return r&&(e.movable.dests={},e.turnColor=B.opposite(e.turnColor)),r}function h(e,t,n){if(n)if(w(e,t,n)){if(m(e,t,n)){var o=K.stop();return g(e),r(e.movable.events.after,t,n,{premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o}),!0}}else C(e,t,n)?(l(e,t,n,{ctrlKey:e.stats.ctrlKey}),g(e)):k(e,n)||x(e,n)?(g(e,n),K.start()):g(e);else K.cancel(),g(e),"trash"===e.movable.dropOff&&(delete e.pieces[t],r(e.events.change));return!1}function b(e,t,n,o){if(P(e,t,n)||o){var i=e.pieces[t];delete e.pieces[t],v(e,i,n,o),e.movable.dropped=void 0,r(e.movable.events.afterNewPiece,i.role,n,{predrop:!1})}else M(e,t,n)?c(e,e.pieces[t].role,n):(u(e),d(e));delete e.pieces[t],g(e)}function y(e,t,n){e.selected?t&&(e.selected!==t||e.draggable.enabled)?(e.selectable.enabled||n)&&e.selected!==t?h(e,e.selected,t)&&(e.stats.dragged=!1):K.start():(g(e),K.cancel()):t&&(k(e,t)||x(e,t))&&(g(e,t),K.start()),t&&r(e.events.select,t)}function g(e,t){e.selected=t,t&&x(e,t)?e.premovable.dests=E.default(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function k(e,t){var n=e.pieces[t];return n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}function w(e,t,n){return t!==n&&k(e,t)&&(e.movable.free||!!e.movable.dests&&B.containsX(e.movable.dests[t],n))}function P(e,t,n){var r=e.pieces[t];return r&&n&&(t===n||!e.pieces[n])&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function x(e,t){var n=e.pieces[t];return n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function C(e,t,n){return t!==n&&x(e,t)&&B.containsX(E.default(e.pieces,t,e.premovable.castle),n)}function M(e,t,n){var r=e.pieces[t];return r&&n&&(!e.pieces[n]||e.pieces[n].color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}function T(e,t){var n=e.pieces[t];return n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function O(e){var t=e.premovable.current;if(!t)return!1;var n=t[0],o=t[1],i=!1;return w(e,n,o)&&m(e,n,o)&&(r(e.movable.events.after,n,o,{premove:!0}),i=!0),u(e),i}function N(e,t){var n=e.predroppable.current,o=!1;if(!n)return!1;if(t(n)){var i={role:n.role,color:e.movable.color};v(e,i,n.key)&&(r(e.movable.events.afterNewPiece,n.role,n.key,{predrop:!0}),o=!0)}return d(e),o}function _(e){u(e),d(e),y(e)}function j(e){e.movable.color=void 0,e.movable.dests=void 0,_(e)}function D(e,t,n){var r=Math.ceil(8*((t[0]-n.left)/n.width));r="white"===e?r:9-r;var o=Math.ceil(8-8*((t[1]-n.top)/n.height));return o="white"===e?o:9-o,r>0&&r<9&&o>0&&o<9?B.pos2key([r,o]):void 0}function S(e){var t,n,r,o={king:0,queen:0,rook:0,bishop:0,knight:0,pawn:0};for(var i in e.pieces)t=e.pieces[i],o[t.role]+="white"===t.color?1:-1;var a={white:{},black:{}};for(n in o)r=o[n],r>0?a.white[n]=r:r<0&&(a.black[n]=-r);return a}function q(e){var t=0;for(var n in e.pieces)t+=A[e.pieces[n].role]*("white"===e.pieces[n].color?1:-1);return t}var B=e("./util"),E=e("./premove"),K=e("./hold");n.toggleOrientation=o,n.reset=i,n.setPieces=a,n.setCheck=s,n.unsetPremove=u,n.unsetPredrop=d,n.baseMove=p,n.baseNewPiece=v,n.dropNewPiece=b,n.selectSquare=y,n.isDraggable=T,n.playPremove=O,n.playPredrop=N,n.stop=j,n.getKeyAtDomPos=D,n.getMaterialDiff=S;var A={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:0};n.getScore=q},{"./hold":16,"./premove":18,"./util":19}],12:[function(e,t,n){"use strict";function r(e,t){t&&(t.movable&&t.movable.dests&&(e.movable.dests=void 0),o(e,t),t.fen&&(e.pieces=a.read(t.fen),e.check=t.check,e.drawable.shapes=[]),e.movable.dropped=void 0,(!e.animation.duration||e.animation.duration<40)&&(e.animation.enabled=!1))}function o(e,t){for(var n in t)e[n]=i(e[n])&&i(t[n])?o(e[n],t[n]):t[n]}function i(e){return"object"==typeof e}var a=e("./fen");Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./fen":15}],13:[function(e,t,n){"use strict";function r(e,t,n){var r={},l=s.default(t,n);return{data:e,state:r,getFen:function(){return i.write(e.pieces)},getMaterialDiff:function(){return o.getMaterialDiff(e)},set:function(t){l(function(e){return a.default(e,t)},e)},toggleOrientation:function(){l(o.toggleOrientation,e)},setPieces:function(t){l(function(e){return o.setPieces(e,t)},e)},selectSquare:function(t){l(function(e){return o.selectSquare(e,t)},e,!0)},apiMove:function(t,n){l(function(e){return o.baseMove(e,t,n)},e)},apiNewPiece:function(t,n){l(function(e){return o.baseNewPiece(e,t,n)},e)},playPremove:function(){l(o.playPremove,e)},playPredrop:function(t){l(function(e){return o.playPredrop(e,t)},e)},cancelPremove:function(){l(o.unsetPremove,e,!0)},cancelPredrop:function(){l(o.unsetPredrop,e,!0)},setCheck:function(t){l(function(e){return o.setCheck(e,t)},e,!0)},explode:function(e){r.exploding={stage:1,keys:e},t(),setTimeout(function(){r.exploding&&(r.exploding.stage=2,t()),setTimeout(function(){r.exploding&&(r.exploding=void 0,t())},120)},120)},setAutoShapes:function(t){l(function(e){return e.drawable.autoShapes=t},e)},setShapes:function(t){l(function(e){return e.drawable.shapes=t},e)}}}var o=e("./board"),i=e("./fen"),a=e("./configure"),s=e("./anim");Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./anim":10,"./board":11,"./configure":12,"./fen":15}],14:[function(e,t,n){"use strict";function r(){return{pieces:o.read(o.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!1,viewOnly:!1,disableContextMenu:!1,resizable:!0,pieceKey:!1,highlight:{lastMove:!0,check:!0,dragOver:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",dropOff:"revert",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!1,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"}}}}var o=e("./fen");Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./fen":15}],15:[function(e,t,n){"use strict";function r(e){"start"===e&&(e=n.initial);var t,r,o,s={};return e.replace(/ .+$/,"").replace(/~/g,"").split("/").forEach(function(e,n){t=0,e.split("").forEach(function(e){r=parseInt(e),r?t+=r:(++t,o=e.toLowerCase(),s[i.pos2key([t,8-n])]={role:a[o],color:e===o?"black":"white"})})}),s}function o(e){var t,n;return[8,7,6,5,4,3,2].reduce(function(e,t){return e.replace(new RegExp(Array(t+1).join("1"),"g"),t)},i.invRanks.map(function(r){return i.ranks.map(function(o){return t=e[i.pos2key([o,r])],t?(n=s[t.role],"white"===t.color?n.toUpperCase():n):"1"}).join("")}).join("/"))}var i=e("./util");n.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var a={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},s={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};n.read=r,n.write=o},{"./util":19}],16:[function(e,t,n){"use strict";function r(){a=new Date}function o(){a=void 0}function i(){if(!a)return 0;var e=(new Date).getTime()-a.getTime();return a=void 0,e}var a;n.start=r,n.cancel=o,n.stop=i},{}],17:[function(e,t,n){"use strict";function r(e,t){function n(){o=f(o,a.default(d,u.bounds))}function r(){u.bounds=e.getBoundingClientRect(),n()}var o,u={element:e,bounds:e.getBoundingClientRect()},c=l.default();s.default(c,t);var d=i.default(c,n,u);return n(),o=f(e,a.default(d,u.bounds)),c.resizable&&setTimeout(function(){document.body.addEventListener("chessground.resize",r,!1),["onscroll","onresize"].forEach(function(e){var t=window[e];window[e]=function(){t&&t(),r()}})},500),e.addEventListener("contextmenu",function(e){return!c.disableContextMenu&&!c.drawable.enabled||(e.preventDefault(),!1)}),d}var o=e("snabbdom"),i=e("./ctrl"),a=e("./view"),s=e("./configure"),l=e("./defaults"),u=e("snabbdom/modules/class"),c=e("snabbdom/modules/style"),d=e("snabbdom/modules/attributes"),f=o.init([u.default,c.default,d.default]);Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./configure":12,"./ctrl":13,"./defaults":14,"./view":20,snabbdom:7,"snabbdom/modules/attributes":4,"snabbdom/modules/class":5,"snabbdom/modules/style":6}],18:[function(e,t,n){"use strict";function r(e,t){return Math.abs(e-t)}function o(e){return function(t,n,o,i){return r(t,n)<2&&("white"===e?i===o+1||o<=2&&i===o+2&&t===n:i===o-1||o>=7&&i===o-2&&t===n)}}function i(e,t,n){return function(o,i,a,s){return r(o,i)<2&&r(a,s)<2||n&&a===s&&a===("white"===e?1:8)&&(5===o&&(3===i||7===i)||l.containsX(t,i))}}function a(e,t){var n;return Object.keys(e).filter(function(r){return n=e[r],n&&n.color===t&&"rook"===n.role}).map(function(e){return l.key2pos(e)[0]})}function s(e,t,n){var r,s=e[t],p=l.key2pos(t);switch(s.role){case"pawn":r=o(s.color);break;case"knight":r=u;break;case"bishop":r=c;break;case"rook":r=d;break;case"queen":r=f;break;case"king":r=i(s.color,a(e,s.color),n)}return l.allPos.filter(function(e){return(p[0]!==e[0]||p[1]!==e[1])&&r(p[0],p[1],e[0],e[1])}).map(l.pos2key)}var l=e("./util"),u=function(e,t,n,o){var i=r(e,t),a=r(n,o);return 1===i&&2===a||2===i&&1===a},c=function(e,t,n,o){return r(e,t)===r(n,o)},d=function(e,t,n,r){return e===t||n===r},f=function(e,t,n,r){return c(e,n,t,r)||d(e,n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./util":19}],19:[function(e,t,n){"use strict";function r(e){return n.files[e[0]-1]+e[1]}function o(e){return[n.fileNumbers[e[0]],parseInt(e[1])]}function i(e){return n.files[8-n.fileNumbers[e[0]]]+(9-parseInt(e[1]))}function a(e){return"white"===e?"black":"white"}function s(e,t){return e&&e.indexOf(t)!==-1}function l(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function u(){return"transform"in document.body.style?"transform":"webkitTransform"in document.body.style?"webkitTransform":"mozTransform"in document.body.style?"mozTransform":"oTransform"in document.body.style?"oTransform":"msTransform"}function c(){return g||(g=u()),g}function d(){return void 0===k&&(k=window.navigator.userAgent.indexOf("Trident/")>-1),k}function f(e){return"translate("+e[0]+"px,"+e[1]+"px)"}function p(e){return e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0}function v(e){return 1===e.buttons||1===e.button}function m(e){return 2===e.buttons||2===e.button}n.files=["a","b","c","d","e","f","g","h"],n.ranks=[1,2,3,4,5,6,7,8],n.invRanks=[8,7,6,5,4,3,2,1],n.fileNumbers={a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8},n.pos2key=r,n.key2pos=o,n.invertKey=i,n.allPos=[],n.allKeys=[];for(var h=8;h>0;--h)for(var b=1;b<9;++b){var y=[b,h];n.allPos.push(y),n.allKeys.push(r(y))}n.invKeys=n.allKeys.slice(0).reverse(),n.opposite=a,n.containsX=s,n.distance=l;var g;n.transformProp=c;var k;n.isTrident=d,n.translate=f,n.eventPosition=p,n.isLeftButton=v,n.isRightButton=m,n.raf=(window.requestAnimationFrame||window.setTimeout).bind(window)},{}],20:[function(e,t,n){"use strict";function r(e){return t={},t[e.role]=!0,t[e.color]=!0,t;var t}function o(e){return!e.state.sparePieceSelected||"pointer"===e.state.sparePieceSelected}function i(e,t,n){var o=r(e.pieces[t]),i=s(m.key2pos(t),n),a=e.draggable.current,l=e.animation.current;if(a&&a.orig===t&&a.started&&n.pointerSelected)i[0]+=a.pos[0]+a.dec[0],i[1]+=a.pos[1]+a.dec[1],o.dragging=!0;else if(l){var u=l.plan.anims[t];u&&(i[0]+=u[1][0],i[1]+=u[1][1])}return v.h(h,{key:"p"+t,class:r(e.pieces[t]),style:(c={},c[n.transformProp]=m.translate(i),c),attrs:e.pieceKey?{"data-key":t}:void 0});var c}function a(e,t,n){return v.h(b,{key:"s"+e,class:t,style:(r={},r[n.transformProp]=m.translate(s(m.key2pos(e),n)),r)});var r}function s(e,t){return[(t.asWhite?e[0]-1:8-e[0])*t.bounds.width/8,(t.asWhite?8-e[1]:e[1]-1)*t.bounds.height/8]}function l(e,t,n){var o=r(t);return o.ghost=!0,v.h(h,{key:"g"+e,classes:o,style:(i={},i[n.transformProp]=m.translate(s(m.key2pos(e),n)),i)});var i}function u(e,t){var n=r(e.piece);return n.fading=!0,v.h(h,{key:"f"+m.pos2key(e.pos),classes:n,style:(o={},o[t.transformProp]=m.translate(s(e.pos,t)),o.opacity=e.opacity,o)});var o}function c(e,t,n){e[t]?e[t][n]=!0:e[t]=(r={},r[n]=!0,r);var r}function d(e,t){var n,r,o=e.data,i={};if(o.lastMove&&o.highlight.lastMove)for(n in o.lastMove)c(i,o.lastMove[n],"last-move");if(o.check&&o.highlight.check&&c(i,o.check,"check"),o.selected){c(i,o.selected,"selected");var s=o.draggable.current&&o.draggable.current.over,l=o.movable.dests&&o.movable.dests[o.selected];if(l)for(n in l)r=l[n],o.movable.showDests&&c(i,r,"move-dest"),r===s?c(i,r,"drag-over"):o.movable.showDests&&o.pieces[r]&&c(i,r,"oc");var u=o.premovable.dests;if(u)for(n in u)r=u[n],o.movable.showDests&&c(i,r,"premove-dest"),r===s?c(i,r,"drag-over"):o.movable.showDests&&o.pieces[r]&&c(i,r,"oc")}var d=o.premovable.current;if(d)for(n in d)c(i,d[n],"current-premove");else o.predroppable.current&&c(i,o.predroppable.current.key,"current-premove");var f=e.state.exploding;if(f)for(n in f.keys)c(i,f.keys[n],"exploding"+f.stage);var p=[];if(o.items)return p;for(n in i)p.push(a(n,i[n],t));return p}function f(e,t){var n,r=e.data,a={asWhite:"white"===r.orientation,bounds:t,transformProp:m.transformProp(),pointerSelected:o(e)},s=r.animation.current,c=d(e,a),f=s&&s.plan.fadings,p=r.draggable.current;if(f)for(n in f)c.push(u(f[n],a));var v=a.asWhite?m.allKeys:m.invKeys;if(r.items);else{for(n=0;n<64;n++)r.pieces[v[n]]&&c.push(i(r,v[n],a));p&&p.newPiece&&c.push(i(r,"a0",a))}return p&&r.draggable.showGhost&&!p.newPiece&&c.push(l(p.orig,r.pieces[p.orig],a)),c}function p(e,t){var n=e.data;return v.h("div",{class:(r={"cg-board-wrap":!0},r["orientation-"+n.orientation]=!0,r["view-only"]=n.viewOnly,r.manipulable=!n.viewOnly,r)},[v.h("div",{class:{"cg-board":!0}},f(e,t))]);var r}var v=e("snabbdom"),m=e("./util"),h="piece",b="square";Object.defineProperty(n,"__esModule",{value:!0}),n.default=p},{"./util":19,snabbdom:7}]},{},[17])(17)});